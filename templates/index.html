<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FuelPass Estimator</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px 
auto; }
    .grid { display: grid; gap: 10px; }
    .metric { display: flex; justify-content: space-between; }
    button { margin-top: 20px; padding: 10px; background: #007BFF; color: 
white; border: none; cursor: pointer; }
    #resultArea { display: none; margin-top: 20px; padding: 15px; 
background: #f0f0f0; }
  </style>
</head>
<body>
  <h2>Estimate your fuel cost in South African Rands (ZAR)</h2>

  <div class="grid">
    <label>Make: <input id="make" type="text"></label>
    <label>Year: <input id="year" type="number"></label>
    <label>Engine (L): <input id="engine" type="number" 
step="0.1"></label>
    <label>Distance (km): <input id="distance" type="number"></label>
    <label>Fuel price per litre (ZAR): <input id="price" type="number" 
step="0.01" value="25.0"></label>
    <label>Body type: 
      <select id="body">
        <option value="sedan">sedan</option>
        <option value="suv">suv</option>
        <option value="van">van</option>
        <option value="truck">truck</option>
      </select>
    </label>
    <label>Route: 
      <select id="route">
        <option value="mixed">mixed</option>
        <option value="highway">highway</option>
        <option value="city">city</option>
      </select>
    </label>
    <label>Driving: 
      <select id="drive">
        <option value="normal">normal</option>
        <option value="aggressive">aggressive</option>
        <option value="eco">eco</option>
      </select>
    </label>
  </div>

  <button onclick="callEstimate()">Estimate</button>

  <div id="resultArea">
    <h3>Your Estimate</h3>
    <div class="metric"><strong>Estimated Cost:</strong> <span 
id="cost">R0.00</span></div>
    <div class="metric"><strong>L/100km:</strong> <span 
id="l_per_100km">0.0</span> L/100km</div>
    <div class="metric"><strong>Distance:</strong> <span 
id="distance_km">0</span> km</div>
    <div class="metric"><strong>Fuel Needed:</strong> <span 
id="liters_needed">0.0</span> L</div>
  </div>

  <script>
    async function callEstimate() {
      const payload = {
        make: document.getElementById('make').value || null,
        year: parseInt(document.getElementById('year').value) || null,
        engine_l: parseFloat(document.getElementById('engine').value) || 
null,
        distance_km: parseFloat(document.getElementById('distance').value) 
|| 0,
        fuel_price: parseFloat(document.getElementById('price').value) || 
25.0,
        body_type: document.getElementById('body').value,
        route: document.getElementById('route').value,
        driving_style: document.getElementById('drive').value
      };

      try {
        const response = await fetch('/estimate', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-API-Key': 'fp_live_zeustech_fuelpass_2025'
          },
          body: JSON.stringify(payload)
        });

        const data = await response.json();

        if (data.error) {
          alert('Error: ' + data.error);
          return;
        }

        document.getElementById('cost').textContent = 
`R${data.bestCost.toFixed(2)}`;
        document.getElementById('l_per_100km').textContent = 
data.l_per_100km.toFixed(2);
        document.getElementById('distance_km').textContent = 
data.distance_km;
        document.getElementById('liters_needed').textContent = 
data.best_liters.toFixed(2);

        document.getElementById('resultArea').style.display = 'block';

      } catch (err) {
        alert('Error: ' + (err.message || 'Failed'));
      }
    }
  </script>

  <footer>
    Â© 2025 ZEUSTECH. For licensing, contact licensing@fuelpass.co.za
  </footer>
</body>
</html>
